# アイヌ語のカタカナ

みなさま、
ウポポイ[^upopoy]に行ったのですが、国立アイヌ民族博物館[^nam]の研究者の方とお話する機会があって「アイヌ語をカタカナで表記するときの困りごと」をうかがいました。まずは、山口の理解でシェアします。

[^upopoy]: ウポポイ（民族共生象徴空間） https://ainu-upopoy.jp/

[^nam]: 国立アイヌ民族博物館  https://nam.go.jp/

## 縦書きがおかしい

縦書きにしたときに、小書きの仮名がおかしい。例えば、日本語縦書きのポスターの中にアイヌ語を入れるとおかしい、とても苦労しているとのことで、山口も試してみました。

これは、スクリーンショットを交えて長くなるので、次のコメントにします。

## 分かち書き

アイヌ語は分かち書き。分かたれた単位をなんと呼ぶのか、山口は分からないので、以下で**単位**と呼びます。

### 単位の分割

分かち書きされた単位の途中で改行されてしまうと、1つの単位が分かれたのか、2つの単位なのか分からない。途中で分かれると意味が変わる。例えば「アイヌ」の途中で改行されてしまうと、「アイヌ」なのか「ア　イヌ」なのか分かりません:

> …アイヌ  

↓  

> …ア  
> イヌ…  

2つの単位と受け取られた結果、酷い意味になることもあって、この問題は重大とのこと。

そこで、単位が分かれてしまってないか、校正が大変。テキストを一部でも直すと改行位置が変わってしまい、再び全行を確認することになるとのことです。

### 対策で苦労した例

例えば、「ゴールデンカムイ」[^golden-kamuy]とコラボしたときのホームページ。ブラウザーはウィンドウサイズを自由に変えられるが、そうすると改行位置が変わる。単位の途中で改行しないように工夫したとのこと。

[^golden-kamuy]: ゴールデンカムイ  https://youngjump.jp/goldenkamuy/

苦労の内容を調べてみました:

![](./exhibition-goldenkamuy2021.png)

- 途中で切れてはいけない単位を検出して`span`要素で囲むJavaScriptプログラムを書いてるようです
- その`span`要素に次のCSSを設定しています:
    - `word-break: keep-all;`と設定して、CJKテキストの改行を禁止
    - `white-space: nowrap;`と設定して、行をまたがって折り返さない

### 分割を許して、分割されたことを示す方法

分割を許すとすると、英語のハイフネーションのような仕組みを導入するのかもしれない。その記号は`-`がいいという意見や、`=`がいいという意見がある。

ただし、そのような仕組みを導入しようとしたとき、ハイフネーションアルゴリズムは、かなり複雑になりそうとのこと。

### 区切り文字とHTML/CSSのwhite-space

分かち書きの区切りで使うべき文字は、全角スペースなのか、半角スペースなのかについては、分からないとのことでした。

Macのアイヌ語入力ソース[^mac-ainu-input]で山口が試したところでは、スペース・キーで全角スペースが入力されます。

[^mac-ainu-input]: Macでアイヌ語入力ソースを設定する/切り替える  https://support.apple.com/ja-jp/guide/japanese-input-method/jpim10244/mac

アイヌ語の分かち書きのスペースは、HTML/CSSのホワイトスペース(whitespace)と扱われるのか？扱われるべきか？気になりました。

### 区切り文字の空白の幅

フォントによってはスペースの幅が狭くて、単位が分かれてるのかどうか判別できなくと困ることがあるそうです。

## 小書きのカタカナの大きさ

「ロ」と小書きの「ㇿ」など差があまりないとき、その文字サイズ手動でを小さくする場合などあるそうです。

## PDFからコピー＆ペーストすると文字化け

小書きの仮名をPDFからコピー&ペーストすると文字化けする場合があるそうです。山口が試したときも文字化けしました。

例えば、このページのPDFをダウンロードして、Macのプレビューで表示して「イランカラㇷ゚テ」をコピー＆ペーストすると「イランカラ㽸テ」に化けます。

[アイヌ語弁論大会～イタカンロー～](https://www.ff-ainu.or.jp/web/learn/language/itakanro/)

# 縦書きがおかしい

縦書きがおかしい件、実例をあげます。
中身のテキストは次の通り:

[ainu-vertical.txt](./ainu-vertical.txt)
```
『ゴールデンカムイ』 ネコン アン ペ ネ ルウェ アン？
『ゴールデンカムイ』とは
ヒラギノ明朝 ProN
『ゴールデンカムイ』 セコㇿ レヘ アン オルㇱペ， 野田サトル ニㇱパ ヌイェ ㇷ゚ ネ ワ アスル アㇱ ルウェ ネ．
游明朝
『ゴールデンカムイ』 セコㇿ レヘ アン オルㇱペ， 野田サトル ニㇱパ ヌイェ ㇷ゚ ネ ワ アスル アㇱ ルウェ ネ．
ＭＳ 明朝
『ゴールデンカムイ』 セコㇿ レヘ アン オルㇱペ， 野田サトル ニㇱパ ヌイェ ㇷ゚ ネ ワ アスル アㇱ ルウェ ネ．
IPA明朝
『ゴールデンカムイ』 セコㇿ レヘ アン オルㇱペ， 野田サトル ニㇱパ ヌイェ ㇷ゚ ネ ワ アスル アㇱ ルウェ ネ．
BIZ UDMincho
『ゴールデンカムイ』 セコㇿ レヘ アン オルㇱペ， 野田サトル ニㇱパ ヌイェ ㇷ゚ ネ ワ アスル アㇱ ルウェ ネ．

国立アイヌ民族博物館 第2回特別展示「ゴールデンカムイ トゥラノ アㇷ゚カㇱアン ― 杉元佐一とアシㇼパが旅する世界 ―」(公開日:2021年6月24日)より
```

以下、いずれもMacでの表示のスクリーンショットです。

## ワープロ

### Word

Word
![](./ainu-vertical-word.png)

「ㇷ゚」、小書きの「プ」がヒラギノ明朝とIPA明朝でおかしいです。

### Pages

Pages
![](./ainu-vertical-pages.png)

これは、おかしくない…気がします。

## ブラウザー

ブラウザーはCSSで設定しても、そのフォントが当たるとはかぎらず、実際に以下の例ではあたってないフォントがあります。開発ツールで確認できたもの

### Google Chrome

画面右下の「Rendered Fonts」が実際にあたってるフォントのはずです。

これは、おかしくない…気がします。

![](./ainu-vertical-chrome.png)

![](./ainu-vertical-chrome-hiragino.png)

![](./ainu-vertical-chrome-noto.png)

### Safari

画面ほぼ右下の「固有名」が実際にあたってるフォントのはずです。

「ㇷ゚」、小書きの「プ」がヒラギノとNoto Serifで、時計回りに90°回転してしまってます。

![](./ainu-vertical-safari-hiragino.png)

![](./ainu-vertical-safari-noto.png)


----


## 何年も前から困っている

何年も前から困ってた、みんな、あきらめ、どうすれば？

## 別の言語だが外国語ではない

> アイヌ語は日本語とは異なる言語だが、**外国語ではない**

----

## 検索

Web検索、生成AI、ページ内検索でどうか？

## 新たに追加された文字に関するテスト項目

これに限らず、今後、新しい文字が追加されたときに確認すべき項目のリストができるのではないか。

## 行政DXとアイヌ語カタカナ表記

娘に「アシㇼパ」と名付けられるか？戸籍に登録できるか？行政サービスを受けられるか？

## 文字／言語のLReq-d

ain, ain-kana, ain-latn, ain-kana-jp, ...

----

## 課題

`lang="ain"`とすると

- 句読点の位置が日本語と異なってしまう可能性がある。例:
    - `lang="zh-CN"`　ヘロキカㇻ。
    - `lang="ja"`　ヘロキカㇻ。
- 漢字が日本語と異なってしまう可能性がある。例:
    - `lang="zh-CN"` 海
    - `lang="ja"` 海

## 分割禁止機能

ワープロなどの分割禁止機能を調べた。

Microsoft Word、Apple Pagesには文字列の分割禁止機能は見当たらなかった。

### CSS

`word-break: keep-all;`でCJKの語を分割禁止にできる。全角スペース（和文間隔、`U+3000`）は改行可能文字なので、半角スペースまたは全角スペースを使った分かち書きで有効。

### InDesign

文字列の分割禁止機能がある。文字列スタイルとして登録できる。
段落スタイルに、正規表現を使って、マッチする文字列に既定の文字列スタイルを適用できる。
組み合わせると、段落内で正規表現にマッチする文字列を分割禁止にできる。ここで正規表現として任意の単語`\w`を登録すると、分かち書きしたカタカナの語がマッチする。分かち書きを半角スペースで行っても全角スペースで行っても間のカタカナ列が単語として認識される。

### 秀丸

分割禁止拡張がある。「カタカナの単語と思わしき箇所を分割しない」にできる。文字列を選択して分割禁止にできる。
しかし、「カタカナの単語と思わしき箇所を分割しない」に設定しても、小書きの「ㇿ」の前後で分割されてしまう。
分割禁止ワード用ファイルに語を登録して分割禁止にでき、ここで正規表現を使える。分割禁止対象ワード用のファイルはShift-JISで保存されてる必要がある。従って、Shift-JISの範囲外の文字を対象にできない。
分割禁止したいワードを選択して右クリックのメニューから分割禁止ワードに登録できる。しかし、小書きの「ㇿ」を含む文字列では登録ダイアログが表示されない。ここでもShift-JIS以外は登録できないと考えられる。
